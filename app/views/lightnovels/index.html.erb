<div class="jumbotron">
  <% if user_signed_in? %>
    <h1>Welcome back, trusted user!</h1>
    <p class="lead">
      You have signed in!  If this were a real app some sweet conent
      would go here.  But it's just a test.  You might want to sign out now.
    </p>
    <%= link_to "Sign Out", destroy_user_session_path, :method => :delete, :class => 'btn btn-large btn-danger' %>
  <% else %>
    <h1>Welcome, new user!</h1>
    <p class="lead">
      You must sign in or sign up before you can access our super sweet,
      top secret content.
    </p>
    <div class="row-fluid">
      <div class="span6">
        <%= link_to "Sign In", new_user_session_path, :class => "btn btn-success" %>
      </div>
      <div class="span6">
        <%= link_to "Sign Up", new_user_registration_path, :class => "btn btn-success" %>
      </div>
    </div>
  <% end %>
</div>







<h1>Listing All Novels/Manga</h1>

<br/><%= link_to 'New Lightnovel', new_lightnovel_path %>

<br/><%= will_paginate @lightnovels %>
<% cache @lightnovels do %>
  <table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Number of Chapters</th>
            <th>Type</th>        
            <th>Follow/Un-follow</th>            
                
            <th colspan="3"></th>
        </tr>
     </thead>   
     <tbody>
        <% @lightnovels.each do |lightnovel| %>
            <% cache ["single", lightnovel] do %>
              <tr>
                <td><%= link_to "#{lightnovel.name}", lightnovel %></td>
                <td><%= lightnovel.number_of_chapters %></td>
                <td><%= lightnovel.lightnovel_type %></td>
                <td>
                    <% if current_user.lightnovels.find_by(id: lightnovel.id).nil? %>
                        <%= link_to 'Follow', follow_lightnovel_path(id: lightnovel.id, anchor: "index_lightnovel_#{lightnovel.id}") %>
                    <% else %>
                        <%= link_to 'Un-follow', unfollow_lightnovel_path(id: lightnovel.id, anchor: "index_lightnovel_#{lightnovel.id}") %>            
                    <% end %>
                    </td>                
                <!-- <td><%= lightnovel.id %></td>                 -->
<!--                 <td><%= link_to 'Edit', edit_lightnovel_path(lightnovel) %></td>
                <td><%= link_to 'Destroy', lightnovel, method: :delete, data: { confirm: 'Are you sure?' } %></td> -->
              </tr>
            <% end %>
        <% end %>
      </tbody>
  </table>
<% end %>

<br/><%= will_paginate @lightnovels %>